{"ts":1373405301053,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\nvar events = [\n\t{\n\t\tdate: new Date(1979,11,13), \n\t\ttitle: \"Steve\",\n\t\temail: 'steveridout@gmail.com',\n\t\temailMD5: '03acdc2c53d705041810019322fc6a7c'\n\t},\n\t{\n\t\tdate: new Date(1985,3,4), \n\t\ttitle: \"Ed\",\n\t\temail: 'edward.tewiah@gmail.com',\n\t\temailMD5: '216c7bf457b9545adf01c853db2d3210'\n\t},\n\t{\n\t\tdate: new Date(1980,01,10), \n\t\ttitle: \"Chris\"\n\t},\n\t{\n\t\tdate: new Date(1981,3,4), \n\t\ttitle: \"Tom\"\n\t},\n\t{\n\t\tdate: new Date(1912,01,10), \n\t\ttitle: \"Alex\"\n\t}\n];\n*/\n\nvar events = [\n\t{\n\t\tdate: new Date(1962, 10, 14), \n\t\ttitle: \"Cuban missile crisis\",\n\t\timage: \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Soviet-R-12-nuclear-ballistic_missile.jpg/300px-Soviet-R-12-nuclear-ballistic_missile.jpg\"\n\t},\n\t{\n\t\tdate: new Date(1967, 6, 1), \n\t\ttitle: \"Sgt. Pepper's Lonely Hearts Club Band\",\n\t\timage: \"http://upload.wikimedia.org/wikipedia/en/thumb/5/50/Sgt._Pepper%27s_Lonely_Hearts_Club_Band.jpg/220px-Sgt._Pepper%27s_Lonely_Hearts_Club_Band.jpg\"\n\t},\n\t{\n\t\tdate: new Date(1968, 4, 4), \n\t\ttitle: \"Assassination of Martin Luther King, Jr\",\n\t\timage: \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Martin_Luther_King_Jr_NYWTS.jpg/220px-Martin_Luther_King_Jr_NYWTS.jpg\"\n\t},\n\t{\n\t\tdate: new Date(1968, 7, 20),\n\t\ttitle: \"The Moon Landing\",\n\t\timage: \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Apollo_11_first_step.jpg/300px-Apollo_11_first_step.jpg\"\n\t},\n\t{\n\t\tdate: new Date(1967, 8, 15), \n\t\ttitle: \"Woodstock Festival\",\n\t\timage: \"https://upload.wikimedia.org/wikipedia/en/thumb/b/b7/Woodstock_poster.jpg/250px-Woodstock_poster.jpg\"\n\t}\n];\n\nevents.sort(function (a, b) {\n\treturn a.date - b.date;\n});\n\n$(document).ready( function(){\n\t// returns true if just one event is in the correct position\n\tvar hasCorrectItem = function (shuffled) {\n\t\tvar hasCorrect = false;\n\t\t_.each(shuffled, function (item, index) {\n\t\t\tif (item.title === events[index].title) {\n\t\t\t\thasCorrect = true;\n\t\t\t}\n\t\t});\n\t\treturn hasCorrect;\n\t};\n\n\tvar shuffledEvents = _.shuffle(events);\n\n\t// ensure that none of the events are in the correct location to start\n\twhile (hasCorrectItem(shuffledEvents)) {\n\t\tshuffledEvents = _.shuffle(events);\n\t}\n\n\t// underscore template, not that attractive, would be better to:\n\t//    1. Place in separate file\n\t// or 2. Just use jQuery to build it instead\n\tvar template = '<% _.each(shuffledEvents, function(event) { %>' +\n\t\t'<li class=\"event\">' +\n\t\t'  <ul>' +\n\t\t'    <li class=\"image\"><img src=\"<%= event.image %>\" />' +\n\t\t'    </li>' +\n\t\t'    <li class=\"title\"><%= event.title %></li>' +\n\t\t'    <li class=\"date\">' +\n\t\t'      <%= event.date.getDate() %> /' +\n\t\t'      <%= event.date.getMonth() %> /' +\n\t\t'      <%= event.date.getFullYear() %>' +\n\t\t'    </li>' + \n\t\t'  </ul>' +\n\t\t'</li>' +\n\t    '<% }); %>';\n\tvar compiled = _.template(template, {shuffledEvents: shuffledEvents});\n\t$('#sortable').html(compiled);\n\n\tvar highlightCorrect = function () {\n\t\tconsole.log(\"dropped %s\", $('#sortable .title').length);\n\n\t\tvar allCorrect = true;\n\n\t\t// find order\n\t\t$('#sortable .title').each(function (index) {\n\t\t\tvar $this = $(this),\n\t\t\t\ttitle = $.trim($this.text());\n\n\t\t\tconsole.log(\"compare %s with %s\", title, events[index].title);\n\t\t\tif (title === events[index].title) {\n\t\t\t\t$this.closest('.event').addClass('correctIndex');\n\t\t\t} else {\n\t\t\t\t$this.closest('.event').removeClass('correctIndex');\n\t\t\t\tallCorrect = false;\n\t\t\t}\n\t\t});\n\n\t\tif (allCorrect) {\n\t\t\t$('#feedback').text(\"Groovy!\");\n\t\t} else {\n\t\t\t$('#feedback').text(\"\");\n\t\t}\n\t};\n\n    $(\"#sortable\").sortable().bind('sortupdate', function (event, ui) {\n\t\thighlightCorrect();\n\t});\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":3543}]],"length":3543}
